(function(e){function t(t){for(var o,r,c=t[0],s=t[1],u=t[2],f=0,l=[];f<c.length;f++)r=c[f],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);p&&p(t);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},a={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0cfaa7":"1013a954","chunk-55427f5a":"62ffe3a2","chunk-7f53603c":"273020bf","chunk-7f995d18":"a52c6335"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-55427f5a":1,"chunk-7f53603c":1,"chunk-7f995d18":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-2d0cfaa7":"31d6cfe0","chunk-55427f5a":"dd11e16b","chunk-7f53603c":"63176c82","chunk-7f995d18":"c6669fa4"}[e]+".css",a=s.p+o,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],f=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(f===o||f===a))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],f=u.getAttribute("data-href");if(f===o||f===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete r[e],p.parentNode.removeChild(p),n(i)},p.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){r[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=i);var u,f=document.createElement("script");f.charset="utf-8",f.timeout=120,s.nc&&f.setAttribute("nonce",s.nc),f.src=c(e);var l=new Error;u=function(t){f.onerror=f.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}a[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:f})}),12e4);f.onerror=f.onload=u,document.head.appendChild(f)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],f=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=f;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},4360:function(e,t,n){"use strict";n("d3b7"),n("ddb0"),n("ac1f"),n("5319");var o=n("2b0e"),r=n("2f62");o["a"].use(r["a"]);var a=n("c653"),i=a.keys().reduce((function(e,t){var n=t.replace(/^\.\/(.*)\.\w+$/,"$1"),o=a(t);return e[n]=o.default,e}),{}),c=new r["a"].Store({modules:i});t["a"]=c},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d3b7");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("Login")],1)},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Login"},[n("div",{staticClass:"maskFoo",class:!e.isShowLogin&&"hide",on:{click:function(t){return e.isShow(!1)}}},[n("div",{staticClass:"mask",on:{click:function(t){return t.stopPropagation(),e.isShow(!0)}}},[e._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",placeholder:"username"},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||e.$set(e.formData,"username",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.pwd,expression:"formData.pwd"}],attrs:{type:"text",placeholder:"pwd"},domProps:{value:e.formData.pwd},on:{input:function(t){t.target.composing||e.$set(e.formData,"pwd",t.target.value)}}}),n("div",{staticClass:"btn",on:{click:function(t){return e.login()}}},[e._v("登录/注册")]),n("div",{staticClass:"tip"},[e._v(e._s(e.tip))])])])])},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("span",[e._v("你是?")])])}],s=n("5530"),u=n("8898"),f={name:"Layout",components:{},props:[],data:function(){return{formData:{username:"liukaiwen",pwd:"111111"},tip:""}},computed:{userInfo:function(){return this.$store.state.auth.userInfo},isShowLogin:function(){return this.$store.state.auth.isShowLogin},isSuccessLogin:function(){return this.$store.state.auth.isSuccessLogin}},watch:{isSuccessLogin:function(e){e&&this.fetchUserInfoById()}},created:function(){this.userInfo.username&&this.userInfo.pwd&&(this.formData=this.userInfo,this.login())},mounted:function(){},methods:{login:function(){if(this.formData.username&&this.formData.username){var e=this,t={apiUrl:u["a"].config.apiURL,user:e.formData.username,pwd:e.formData.pwd,appKey:u["a"].config.appkey,error:function(){e.register()}};u["a"].conn.open(t)}},register:function(){var e=this,t={username:e.formData.username,password:e.formData.pwd,nickname:"nickname",appKey:u["a"].config.appkey,success:function(){e.login()},error:function(t){var n=JSON.parse(t.data);"duplicate_unique_property_exists"===n.error?e.tip="用户已存在！":"illegal_argument"===n.error?"USERNAME_TOO_LONG"===n.error_description?e.tip="用户名超过64个字节！":e.tip="用户名不合法！":"unauthorized"===n.error?e.tip="注册失败，无权限！":"resource_limited"===n.error&&(e.tip="用户注册数量已达上限")}};u["a"].conn.registerUser(t)},fetchUserInfoById:function(){var e=this;u["a"].conn.fetchUserInfoById(this.formData.username).then((function(t){e.$store.commit("SET_USERINFO",Object(s["a"])(Object(s["a"])({},e.formData),t.data[e.formData.username])),e.$store.commit("SET_ISSHOW_LOGIN",!1)}))},isShow:function(e){this.$store.commit("SET_ISSHOW_LOGIN",e)}}},l=f,p=(n("9452"),n("2877")),d=Object(p["a"])(l,i,c,!1,null,"bded8b6c",null),m=d.exports,h={name:"App",components:{Login:m}},g=h,S=(n("034f"),Object(p["a"])(g,r,a,!1,null,null,null)),v=S.exports,w=n("2909"),b=(n("99af"),n("8c4f")),L=n("1da1"),I=(n("96cf"),n("4360")),y=function(){_.afterEach(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:!I["a"].state.auth.isSuccessLogin&&t.meta.login&&I["a"].commit("SET_ISSHOW_LOGIN",!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},O=n("9f25");o["a"].use(b["a"]);var _=new b["a"]({routes:[{path:"*",redirect:"/home",meta:{}}].concat(Object(w["a"])(O["a"]))});y();var E=n("b2d8"),k=n.n(E),T=(n("92fc"),n("a4df")),N=n.n(T),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Header"},[e._t("default")],2)},j=[],C={name:"Header",components:{},props:[],data:function(){return{}},computed:{userInfo:function(){return this.$store.state.auth.userInfo}},watch:{},created:function(){},mounted:function(){},methods:{}},R=C,x=(n("da68"),Object(p["a"])(R,D,j,!1,null,"201ec18a",null)),U=x.exports,M=n("1487"),$=n.n(M);o["a"].use(k.a),$.a.highlightCode=function(){var e=document.querySelectorAll("pre code");[].forEach.call(e,$.a.highlightBlock)},o["a"].prototype.$hljs=$.a,o["a"].prototype.$dayjs=N.a,o["a"].component("Header",U),o["a"].config.productionTip=!1,new o["a"]({router:_,store:I["a"],render:function(e){return e(v)}}).$mount("#app")},"7d9e":function(e,t,n){},"85ec":function(e,t,n){},8898:function(e,t,n){"use strict";var o,r=n("5530"),a=(n("d81d"),n("b64b"),n("ac1f"),n("00b4"),{xmppURL:("https:"===window.location.protocol?"https:":"http:")+"//im-api-v2.easemob.com/ws",apiURL:("https:"===window.location.protocol?"https:":"http:")+"//a1.easemob.com",appkey:"1135210716152189#hi-jx",Host:"easemob.com",https:!0,isHttpDNS:!1,isMultiLoginSessions:!0,isWindowSDK:!1,isSandBox:!1,isDebug:!0,isStropheLog:!1,autoReconnectNumMax:5,autoReconnectInterval:2,isWebRTC:window.RTCPeerConnection&&/^https:$/.test(window.location.protocol),i18n:"cn",isAutoLogin:!0,p2pMessageCacheSize:500,delivery:!1,groupMessageCacheSize:200,loglevel:"ERROR",enableLocalStorage:!0}),i=a,c=n("6dcb"),s=n.n(c),u=n("4360"),f={};f=window.WebIM=s.a,f.config=i,f.conn=new f.connection({appKey:f.config.appkey,isHttpDNS:f.config.isHttpDNS,isMultiLoginSessions:f.config.isMultiLoginSessions,host:f.config.Host,https:f.config.https,url:f.config.xmppURL,apiUrl:f.config.apiURL,isAutoLogin:!1,heartBeatWait:f.config.heartBeatWait,autoReconnectNumMax:f.config.autoReconnectNumMax,autoReconnectInterval:f.config.autoReconnectInterval,isStropheLog:f.config.isStropheLog,delivery:f.config.delivery}),window.onload=function(){setInterval((function(){var e=new Date,t=e.getMonth()+1,n=e.getFullYear()+"-"+t+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();o=n}),1e3)},f.conn.listen({onOpened:function(e){console.log("%c [opened] 连接已成功建立","color: green",o,e),u["a"].commit("SET_ISSUCCESS_LOGIN",!0),f.conn.getRoster().then((function(e){f.conn.fetchUserInfoById(e.data).then((function(e){console.log(e);var t=Object.keys(e.data).map((function(t){return Object(r["a"])(Object(r["a"])({},e.data[t]),{},{username:t})}));u["a"].commit("SET_FRIENDLIST",t)}))}))},onTextMessage:function(e){u["a"].commit("SET_MSGLIST",{chatType:e.type,type:e.contentsType,mid:e.id,msg:e.data,time:e.time,from:e.from,to:e.to}),setTimeout((function(){var e=document.getElementsByClassName("listFoo")[0];e.scrollTop=e.scrollHeight}),300)},onContactInvited:function(e){f.conn.acceptInvitation(e.from)}});t["a"]=f},"92fc":function(e,t,n){},9452:function(e,t,n){"use strict";n("b35a")},"9f25":function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var o=function(){return n.e("chunk-7f995d18").then(n.bind(null,"1974"))},r=function(){return n.e("chunk-55427f5a").then(n.bind(null,"9553"))},a=function(){return n.e("chunk-2d0cfaa7").then(n.bind(null,"654f"))},i=function(){return n.e("chunk-7f53603c").then(n.bind(null,"67be"))};t["a"]=[{path:"/",name:"Layout",component:o,redirect:"/home",meta:{},children:[{path:"/home",name:"Home",component:r},{path:"/work",name:"Work",component:a},{path:"/link",name:"Link",component:i,meta:{login:!0}}]}]},b35a:function(e,t,n){},c653:function(e,t,n){var o={"./auth.js":"c7d4"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id="c653"},c7d4:function(e,t,n){"use strict";n.r(t);var o=n("2909"),r=(n("99af"),n("e9c4"),{msgList:localStorage.getItem("msgList")?JSON.parse(localStorage.getItem("msgList")):[],userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{},friendList:localStorage.getItem("friendList")?JSON.parse(localStorage.getItem("friendList")):[],isShowLogin:!1,isSuccessLogin:!1}),a={SET_MSGLIST:function(e,t){e.msgList=[].concat(Object(o["a"])(e.msgList),[t]),localStorage.setItem("msgList",JSON.stringify(e.msgList))},SET_USERINFO:function(e,t){e.userInfo=t,localStorage.setItem("userInfo",JSON.stringify(e.userInfo))},SET_FRIENDLIST:function(e,t){e.friendList=Object(o["a"])(t),localStorage.setItem("friendList",JSON.stringify(e.friendList))},SET_ISSHOW_LOGIN:function(e,t){e.isShowLogin=t},SET_ISSUCCESS_LOGIN:function(e,t){e.isSuccessLogin=t},SET_LOGINOUT:function(){this.commit("SET_MSGLIST",{}),this.commit("SET_USERINFO",{}),this.commit("SET_FRIENDLIST",[]),this.commit("SET_ISSHOW_LOGIN",!1),this.commit("isSuccessLogin",!1),window.location.reload()}},i={},c={};t["default"]={state:r,mutations:a,actions:i,getters:c}},da68:function(e,t,n){"use strict";n("7d9e")}});
//# sourceMappingURL=app.d380cc79.js.map