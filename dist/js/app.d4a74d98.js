(function(t){function e(e){for(var o,r,c=e[0],s=e[1],u=e[2],f=0,l=[];f<c.length;f++)r=c[f],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);p&&p(e);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},a={app:0},i=[];function c(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d0cfaa7":"1013a954","chunk-55427f5a":"62ffe3a2","chunk-67826eba":"3f2e30d4","chunk-7f53603c":"273020bf"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-55427f5a":1,"chunk-67826eba":1,"chunk-7f53603c":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-2d0cfaa7":"31d6cfe0","chunk-55427f5a":"dd11e16b","chunk-67826eba":"572db606","chunk-7f53603c":"63176c82"}[t]+".css",a=s.p+o,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],f=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(f===o||f===a))return e()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],f=u.getAttribute("data-href");if(f===o||f===a)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var o=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete r[t],p.parentNode.removeChild(p),n(i)},p.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){r[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var i=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=i);var u,f=document.createElement("script");f.charset="utf-8",f.timeout=120,s.nc&&f.setAttribute("nonce",s.nc),f.src=c(t);var l=new Error;u=function(e){f.onerror=f.onload=null,clearTimeout(p);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}a[t]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:f})}),12e4);f.onerror=f.onload=u,document.head.appendChild(f)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],f=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var p=f;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},4360:function(t,e,n){"use strict";n("d3b7"),n("ddb0"),n("ac1f"),n("5319");var o=n("2b0e"),r=n("2f62");o["a"].use(r["a"]);var a=n("c653"),i=a.keys().reduce((function(t,e){var n=e.replace(/^\.\/(.*)\.\w+$/,"$1"),o=a(e);return t[n]=o.default,t}),{}),c=new r["a"].Store({modules:i});e["a"]=c},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d3b7");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("v-touch",{staticClass:"wrapper",on:{swipeleft:t.swiperleft,swiperight:t.swiperright}},[n("router-view"),n("Login")],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Login"},[n("div",{staticClass:"maskFoo",class:!t.isShowLogin&&"hide",on:{click:function(e){return t.isShow(!1)}}},[n("div",{staticClass:"mask",on:{click:function(e){return e.stopPropagation(),t.isShow(!0)}}},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],attrs:{type:"text",placeholder:"username"},domProps:{value:t.formData.username},on:{input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.pwd,expression:"formData.pwd"}],attrs:{type:"text",placeholder:"pwd"},domProps:{value:t.formData.pwd},on:{input:function(e){e.target.composing||t.$set(t.formData,"pwd",e.target.value)}}}),n("div",{staticClass:"btn",on:{click:function(e){return t.login()}}},[t._v("登录/注册")]),n("div",{staticClass:"tip"},[t._v(t._s(t.tip))])])])])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("span",[t._v("你是?")])])}],s=n("5530"),u=n("8898"),f={name:"Layout",components:{},props:[],data:function(){return{formData:{username:"liukaiwen",pwd:"111111"},tip:""}},computed:{userInfo:function(){return this.$store.state.auth.userInfo},isShowLogin:function(){return this.$store.state.auth.isShowLogin},isSuccessLogin:function(){return this.$store.state.auth.isSuccessLogin}},watch:{isSuccessLogin:function(t){t&&this.fetchUserInfoById()}},created:function(){this.userInfo.username&&this.userInfo.pwd&&(this.formData=this.userInfo,this.login())},mounted:function(){},methods:{login:function(){if(this.formData.username&&this.formData.username){var t=this,e={apiUrl:u["a"].config.apiURL,user:t.formData.username,pwd:t.formData.pwd,appKey:u["a"].config.appkey,error:function(){t.register()}};u["a"].conn.open(e)}},register:function(){var t=this,e={username:t.formData.username,password:t.formData.pwd,nickname:"nickname",appKey:u["a"].config.appkey,success:function(){t.login()},error:function(e){var n=JSON.parse(e.data);"duplicate_unique_property_exists"===n.error?t.tip="用户已存在！":"illegal_argument"===n.error?"USERNAME_TOO_LONG"===n.error_description?t.tip="用户名超过64个字节！":t.tip="用户名不合法！":"unauthorized"===n.error?t.tip="注册失败，无权限！":"resource_limited"===n.error&&(t.tip="用户注册数量已达上限")}};u["a"].conn.registerUser(e)},fetchUserInfoById:function(){var t=this;u["a"].conn.fetchUserInfoById(this.formData.username).then((function(e){t.$store.commit("SET_USERINFO",Object(s["a"])(Object(s["a"])({},t.formData),e.data[t.formData.username])),t.$store.commit("SET_ISSHOW_LOGIN",!1)}))},isShow:function(t){this.$store.commit("SET_ISSHOW_LOGIN",t)}}},l=f,p=(n("9452"),n("2877")),m=Object(p["a"])(l,i,c,!1,null,"bded8b6c",null),d=m.exports,h={name:"App",components:{Login:d},computed:{touchStatus:function(){return this.$store.state.auth.touchStatus}},methods:{swiperleft:function(){this.touchStatus.nav?this.$store.commit("SET_TOUCHSTATUS",{nav:""}):this.touchStatus.drawer||this.$store.commit("SET_TOUCHSTATUS",{drawer:"active"})},swiperright:function(){this.touchStatus.drawer?this.$store.commit("SET_TOUCHSTATUS",{drawer:""}):this.touchStatus.nav||this.$store.commit("SET_TOUCHSTATUS",{nav:"active"})}}},g=h,S=(n("034f"),Object(p["a"])(g,r,a,!1,null,null,null)),v=S.exports,w=n("2909"),b=(n("99af"),n("8c4f")),L=n("1da1"),I=(n("96cf"),n("4360")),y=function(){_.afterEach(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:!I["a"].state.auth.isSuccessLogin&&e.meta.login&&I["a"].commit("SET_ISSHOW_LOGIN",!0);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},O=n("9f25");o["a"].use(b["a"]);var _=new b["a"]({routes:[{path:"*",redirect:"/home",meta:{}}].concat(Object(w["a"])(O["a"]))});y();var T=n("b2d8"),E=n.n(T),k=(n("92fc"),n("a4df")),N=n.n(k),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Header"},[t._t("default")],2)},D=[],U={name:"Header",components:{},props:[],data:function(){return{}},computed:{userInfo:function(){return this.$store.state.auth.userInfo}},watch:{},created:function(){},mounted:function(){},methods:{}},j=U,R=(n("da68"),Object(p["a"])(j,C,D,!1,null,"201ec18a",null)),x=R.exports,$=n("65d8"),H=n.n($),M=n("1487"),A=n.n(M);o["a"].use(H.a,{name:"v-touch"}),o["a"].use(E.a),A.a.highlightCode=function(){var t=document.querySelectorAll("pre code");[].forEach.call(t,A.a.highlightBlock)},o["a"].prototype.$hljs=A.a,o["a"].prototype.$dayjs=N.a,o["a"].component("Header",x),o["a"].config.productionTip=!1,new o["a"]({router:_,store:I["a"],render:function(t){return t(v)}}).$mount("#app")},"7d9e":function(t,e,n){},"85ec":function(t,e,n){},8898:function(t,e,n){"use strict";var o,r=n("5530"),a=(n("d81d"),n("b64b"),n("ac1f"),n("00b4"),{xmppURL:("https:"===window.location.protocol?"https:":"http:")+"//im-api-v2.easemob.com/ws",apiURL:("https:"===window.location.protocol?"https:":"http:")+"//a1.easemob.com",appkey:"1135210716152189#hi-jx",Host:"easemob.com",https:!0,isHttpDNS:!1,isMultiLoginSessions:!0,isWindowSDK:!1,isSandBox:!1,isDebug:!0,isStropheLog:!1,autoReconnectNumMax:5,autoReconnectInterval:2,isWebRTC:window.RTCPeerConnection&&/^https:$/.test(window.location.protocol),i18n:"cn",isAutoLogin:!0,p2pMessageCacheSize:500,delivery:!1,groupMessageCacheSize:200,loglevel:"ERROR",enableLocalStorage:!0}),i=a,c=n("6dcb"),s=n.n(c),u=n("4360"),f={};f=window.WebIM=s.a,f.config=i,f.conn=new f.connection({appKey:f.config.appkey,isHttpDNS:f.config.isHttpDNS,isMultiLoginSessions:f.config.isMultiLoginSessions,host:f.config.Host,https:f.config.https,url:f.config.xmppURL,apiUrl:f.config.apiURL,isAutoLogin:!1,heartBeatWait:f.config.heartBeatWait,autoReconnectNumMax:f.config.autoReconnectNumMax,autoReconnectInterval:f.config.autoReconnectInterval,isStropheLog:f.config.isStropheLog,delivery:f.config.delivery}),window.onload=function(){setInterval((function(){var t=new Date,e=t.getMonth()+1,n=t.getFullYear()+"-"+e+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();o=n}),1e3)},f.conn.listen({onOpened:function(t){console.log("%c [opened] 连接已成功建立","color: green",o,t),u["a"].commit("SET_ISSUCCESS_LOGIN",!0),f.conn.getRoster().then((function(t){f.conn.fetchUserInfoById(t.data).then((function(t){console.log(t);var e=Object.keys(t.data).map((function(e){return Object(r["a"])(Object(r["a"])({},t.data[e]),{},{username:e})}));u["a"].commit("SET_FRIENDLIST",e)}))}))},onTextMessage:function(t){u["a"].commit("SET_MSGLIST",{chatType:t.type,type:t.contentsType,mid:t.id,msg:t.data,time:t.time,from:t.from,to:t.to}),setTimeout((function(){var t=document.getElementsByClassName("listFoo")[0];t.scrollTop=t.scrollHeight}),300)},onContactInvited:function(t){f.conn.acceptInvitation(t.from)}});e["a"]=f},"92fc":function(t,e,n){},9452:function(t,e,n){"use strict";n("b35a")},"9f25":function(t,e,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var o=function(){return n.e("chunk-67826eba").then(n.bind(null,"1974"))},r=function(){return n.e("chunk-55427f5a").then(n.bind(null,"9553"))},a=function(){return n.e("chunk-2d0cfaa7").then(n.bind(null,"654f"))},i=function(){return n.e("chunk-7f53603c").then(n.bind(null,"67be"))};e["a"]=[{path:"/",name:"Layout",component:o,redirect:"/home",meta:{},children:[{path:"/home",name:"Home",component:r},{path:"/work",name:"Work",component:a},{path:"/link",name:"Link",component:i,meta:{login:!0}}]}]},b35a:function(t,e,n){},c653:function(t,e,n){var o={"./auth.js":"c7d4"};function r(t){var e=a(t);return n(e)}function a(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=a,t.exports=r,r.id="c653"},c7d4:function(t,e,n){"use strict";n.r(e);var o=n("5530"),r=n("2909"),a=(n("99af"),n("e9c4"),{msgList:localStorage.getItem("msgList")?JSON.parse(localStorage.getItem("msgList")):[],userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{},friendList:localStorage.getItem("friendList")?JSON.parse(localStorage.getItem("friendList")):[],isShowLogin:!1,isSuccessLogin:!1,touchStatus:{}}),i={SET_MSGLIST:function(t,e){t.msgList=[].concat(Object(r["a"])(t.msgList),[e]),localStorage.setItem("msgList",JSON.stringify(t.msgList))},SET_USERINFO:function(t,e){t.userInfo=e,localStorage.setItem("userInfo",JSON.stringify(t.userInfo))},SET_FRIENDLIST:function(t,e){t.friendList=Object(r["a"])(e),localStorage.setItem("friendList",JSON.stringify(t.friendList))},SET_ISSHOW_LOGIN:function(t,e){t.isShowLogin=e},SET_ISSUCCESS_LOGIN:function(t,e){t.isSuccessLogin=e},SET_LOGINOUT:function(){this.commit("SET_MSGLIST",{}),this.commit("SET_USERINFO",{}),this.commit("SET_FRIENDLIST",[]),this.commit("SET_ISSHOW_LOGIN",!1),this.commit("isSuccessLogin",!1),window.location.reload()},SET_TOUCHSTATUS:function(t,e){t.touchStatus=Object(o["a"])(Object(o["a"])({},t.touchStatus),e)}},c={},s={};e["default"]={state:a,mutations:i,actions:c,getters:s}},da68:function(t,e,n){"use strict";n("7d9e")}});
//# sourceMappingURL=app.d4a74d98.js.map